<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Example</title>
    <script type="text/javascript">
      function MyBrowserRouter() {
<<<<<<< HEAD
          this.currentRoute = '';
          this.routes = {};
          this.init();
      }

      MyBrowserRouter.prototype.route = function( path, callback ) {
          this.routes[ path ] = function( type ) {
              if ( type == 1 ) {
                  history.pushState( { path }, '', path );
              } else if ( type == 2 ) {
                  history.replaceState( { path }, '', path );
              }

              callback();
          };
      };

      MyBrowserRouter.prototype.refresh = function( path, type ) {
          this.routes[ path ]( type );
      };

      MyBrowserRouter.prototype.init = function() {
          let self = this;
          let links = document.querySelectorAll( '.history-link' );
          window.addEventListener( 'load', function() {
              self.currentRoute = location.href.slice( location.href.indexOf( '/', 8 ) );
              self.refresh( self.currentRoute );
          } );

          window.addEventListener( 'popstate', function() {
              self.currentRoute = history.state.path;
              self.refresh( self.currentRoute, 2 );
          }, false );

          for ( let i = 0; i < links.length; i++ ) {
              links[ i ].onclick = function( e ) {
                  e.preventDefault();
                  self.currentRoute = e.target.getAttribute( 'href' );
                  self.refresh( self.currentRoute, 2 );
              }
          }
=======
        this.currentRoute = '';
        this.routes = {};
        this.init();
      }

      MyBrowserRouter.prototype.route = function( path, callback ) {
        this.routes[ path ] = function( type ) {
          if ( type === 1 ) {
            history.pushState( { path }, path, path );
          } else if ( type === 2 ) {
            history.replaceState( { path }, path, path );
          }
          callback();
        }
      };

      MyBrowserRouter.prototype.refresh = function( path, type ) {
        this.routes[ path ]( type );
      };

      MyBrowserRouter.prototype.init = function() {
        let links = document.querySelectorAll( '.history-link' );

        window.addEventListener( 'load', () => {
          this.currentRoute = location.href.slice( location.href.indexOf( '/', 8 ) );
          this.refresh( this.currentRoute, 2 );
        } );

        window.addEventListener( 'popstate', () => {
          this.currentRoute = history.state.path;
          this.refresh( this.currentRoute, 2 );
        }, false );

        for ( let i = 0; i < links.length; i++ ) {
          links[ i ].onclick = ( e ) => {
            e.preventDefault();
            this.currentRoute = e.target.getAttribute( 'href' );
            this.refresh( this.currentRoute, 2 );
          }
        }
>>>>>>> 67d5b73c2cdd4ea93aa0050e41fe5d6120405a5d
      };
    </script>
  </head>
  <body>
  <div class="router-wrap">
    <a href="/black" class="history-link">黑色</a><br>
    <a href="/green" class="history-link">绿色</a><br>
    <a href="/red" class="history-link">红色</a>
  </div>
    <div id="root" style="width: 100%; height: 100%"></div>
    <div id="portal"></div>
    <script type="text/javascript">
<<<<<<< HEAD
      window.myBrowserRouter = new MyBrowserRouter();
      myBrowserRouter.route( '/black', ()=>document.querySelector( 'body' ).style.backgroundColor = 'black' );
      myBrowserRouter.route( '/green', ()=>document.querySelector( 'body' ).style.backgroundColor = 'green' );
      myBrowserRouter.route( '/red', ()=>document.querySelector( 'body' ).style.backgroundColor = 'red' );
    </script>
<!--    <script type="text/javascript" src="js/vendor.bundle.min.js"></script></body>
=======
      let hashRouter = new MyBrowserRouter();
      function colorChange( color ) { document.querySelector( 'body' ).style.backgroundColor = color; }
      hashRouter.route( '/black', ()=>colorChange('black'));
      hashRouter.route( '/green',()=>colorChange('green'));
      hashRouter.route( '/red',()=>colorChange('red'));
    </script>
    <!--<script type="text/javascript" src="js/vendor.bundle.min.js"></script></body>
>>>>>>> 67d5b73c2cdd4ea93aa0050e41fe5d6120405a5d
    <script type="text/javascript" src="js/app.bundle.min.js"></script></body>-->
  </body>
</html>